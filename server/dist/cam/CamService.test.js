"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const CamService_js_1 = require("./CamService.js");
(0, vitest_1.describe)('CamService', () => {
    const service = new CamService_js_1.CamService();
    const laserTool = {
        id: 'test-laser',
        name: 'Test Laser',
        units: 'mm',
        type: 'laser',
        spotSize: 0.1,
        powerMax: 1000
    };
    (0, vitest_1.it)('generates G-code from SVG', async () => {
        // Use path d string (triangle)
        const svgContent = `<svg><path d="M 0 0 L 10 0 L 0 10 z" /></svg>`;
        const options = {
            tool: laserTool,
            format: 'svg',
            feedrate: 1500
        };
        const gcode = await service.generateVector(svgContent, options);
        (0, vitest_1.expect)(gcode).toContain('; Generated by RevivedLaserweb4 (Vector)');
        (0, vitest_1.expect)(gcode).toContain('G21');
        (0, vitest_1.expect)(gcode).toContain('F1500');
        (0, vitest_1.expect)(gcode).toContain('M3 S0');
        // Check for coordinates (rough check)
        (0, vitest_1.expect)(gcode).toContain('X10');
    });
    (0, vitest_1.it)('throws error for invalid vector', async () => {
        const options = {
            tool: laserTool,
            format: 'svg',
            feedrate: 1000
        };
        await (0, vitest_1.expect)(service.generateVector('invalid-xml', options)).rejects.toThrow();
    });
});
